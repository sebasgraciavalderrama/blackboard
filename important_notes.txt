MY COLLAB PRIVATE ROOM
https://bit.ly/2GJ38gi

TO USE MAILHOG
http://moodle.test:8025/#



<?php

  if ($oldversion < 2018112000) {
        $params = ['topics','folderview','flexpage'];
        $DB->execute('UPDATE {course} SET format = ? WHERE format = ? OR format = ?', $params);
        // Mrooms savepoint reached.
        upgrade_plugin_savepoint(true, 2018111600, 'local', 'mrooms');
    }
    $DB->execute('UPDATE {course_format_options} SET format = ? WHERE format = ? OR format = ?', $params);
    $DB->execute('DELETE FROM{course_format_options} WHERE format = ? OR format = ?', $params);

/*
    EXPECTED BEHAVIOUR:

    The courses with the folowing formats: 'flexpage' and 'folderview' should have 'topics' now instead.
    No other course format should have folderview or flexpage as its value.
    1. Execute the upgrade
    2. You can navigate to master->Admin->Front page settings->Reports-> Admin SQL and run the following query (after executing the upgrade):
    SELECT * FROM mdl_course WHERE format='folderview' OR format='flexpage'
    The output should be: Nothing to display.
    3. Alternatively the following query can be executed and see the query results.
    SELECT * FROM mdl_course WHERE format='topics', no folderview or flexpage values should appear under the format column.
*/

PARA EJECUTAR EL UPGRADE DESDE CONSOLA (CAMBIOS HECHOS SOBRE upgrade.php)
    php admin/cli/upgrade.php

SI EL SERVIDOR DE SELENIUM MUESTRA PROBLEMAS
    behat-servers-start

INCIALIZAR BEHAT
    php admin/tool/behat/cli/init.php

Esto es para el ticket 13698 Behat tests
    vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/theme/snap/tests/behat/ajax_logout_msg.feature
    vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/theme/snap/tests/behat/assignment_grading_capabilities.feature
    vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/theme/snap/tests/behat/personal_menu_messages.feature
    vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/theme/snap/tests/behat/personalmenu_grades.feature
    vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/theme/snap/tests/behat/course_category_colors_setting.feature


PLD BEHAT TEST'S
    vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/local/pld/tests/behat/pld_enrol.feature
    vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/local/pld/tests/behat/pld_enrol_disable.feature

ALLY LTI BEHAT TEST'S (GUY PR COMMIT Logger)
    vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/report/allylti/tests/behat/view_report.feature


ERROR WHEN THE WEBSERVICE IS NOT DECLARED CORRECTLY
        Unknown error type: Class 'local_pld\webservice\external_api' not
        found at /vagrant/www/moodle/local/pld/classes/webservice/pld_search_courses.php: 39 (Exception)

XPATH
    And I click on "//a[@file='repo_upload_file']]" "xpath_element"
    //input[@type='file']

PARA QUITAR UN ARCHIVO DEL COMMIT
    git reset HEAD /path/to/file/file.xyz
    git status
    git commit -m "INT-123: Descripcion 123 abc xyz"

PARA SUBIR EL PHPUnit
    php admin/tool/phpunit/cli/init.php
    vendor/bin/phpunit path/to/file

PARA CORRER LA PRUEBA
    vendor/bin/phpunit path/to/file
    Ejemplo:
      vendor/bin/phpunit local/mrooms/tests/course_test.php
      vendor/bin/phpunit local/mrooms/tests/plugins_test.php

PARA IMPRIMIR EN REGUS
    regus.tierrafirme@regus.com

PARA HACER EL AMEND
    Agregar los archivos modificados:
      git add path/to/files
    git commit --amend
    (luego se hace el push forzado)
    git push -f origin nombre_branch

git push -f origin feature/INT-13902_superficial-rattlesnake
git push -f origin feature/INT-13698_substantial-newt
git push -f origin origin/update/INT-12776_juvenile-tortoise /** dont add oriing**/
git push -f origin update/INT-14160_acclaimed-cow
git push -f origin update/INT-14118_exhausted-gecko

PARA AGREGAR LOS MODIFICADOS Y NO LOS NUEVOS
    git add . -u

PARA MIRAR EL LOG DEL GIT
    git log

PARA CREAR UNA NUEVA BRANCH Y LUEGO HACER EL KOW PUSH ( EN EL CASO DE QUE NO EXISTA UNA BRANCH e.g: MR 3.5 MP 1 no existe)
    git checkout -b (feature or update)/INT-XXXXX_<NAME-OF-THE-BRANCH>
      git checkout -b update/INT-14022_heuristic-salamander
    kow push -p

PARA HACER EL GIT CHERRY-PICK
    git cherry-pick <commit-hash>
      estos hash de los commits estan en mroomstech dentro del pull request y toca hacerlo del mas viejo al ultimo
        'git show' y luego seleccionar el hash del commit que quiero seleccionar...

PARA REBASE
    git pull origin release/3.5+2 --rebase

VIDEO YOUTUBE PLD
    https://www.youtube.com/watch?v=YUvfziypPvs

CREATING CUSTOM ROLES
    https://docs.moodle.org/36/en/Creating_custom_roles

ARCHETYPES
    https://docs.moodle.org/dev/Role_archetypes

ACCESS API
    https://docs.moodle.org/dev/Access_API#How_to_define_new_capabilities_in_plugins

PLD VIDEO RESOURCES
    https://www.youtube.com/watch?v=YUvfziypPvs&
    https://www.youtube.com/watch?v=UWjbPQRyJcI

    001 Example: | clean | # /var/www/mrhosts/bamboo6/xml-data/build-dir/DEV-MOOD1176-BEH/local/geniusws/tests/behat/genius_sso.feature:157

    002 Example: | snap  | # /var/www/mrhosts/bamboo6/xml-data/build-dir/DEV-MOOD1176-BEH/local/geniusws/tests/behat/genius_sso.feature:158

vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/local/geniusws/tests/behat/genius_sso.feature

git commit -m "INT-12776: Added new steps to behat test and conditional operator"

BACKPORT VIDEO
    https://us.bbcollab.com/recording/40866604289a4ea88ece11bdd7874bc0


HOW TO DISABLE PLUGINS, BLOCKS, ETC
 In the file /www/moodle/config_local.php
 Uncomment the type of component you want to disable;
    If you want to disable a block then uncomment '$_MR_BLOCKS           = mr_all_plugins('blocks');'
 Then add this into a new line: 'unset($_MR_BLOCKS['collect']);'
 Then go to Site administration->Type into the search box 'control panel'->Select 'Control Panel'->And navigate to the type of $_MR_XXXX
 and you should see the component with the label 'Disabled' right next to it
 Purging caches might not be necessary but you could purge them any ways.

DEBUG WHATS INSIDE A VAR
    public static function login_url() {
        global $PAGE;
        fwrite(STDERR, 'PAGE URL set? ' . isset($PAGE->url) . PHP_EOL); //this line prints the error through terminal
        if (!PHPUNIT_TEST && isset($PAGE->url)) {
            fwrite(STDERR, 'PAGE URL: ' . $PAGE->url . PHP_EOL); //this line prints the error through terminal
            $url = $PAGE->url;
        } else {
            $url = null;
        }
        return new \moodle_url('/local/geniusws/login.php', ['referrer' => $url]);
    }

USING $CFG TO DESCRIBE A CONTEXT
    $CFG->dirroot/local/pld/classes/form/formattedcourse.php

IN config_kow.php YOU CAN FIND THE CURRENT DATABASE NAME
    i.e. $CFG->dbname = 'INT12344'

HOW TO GET CONTEXT
    https://docs.moodle.org/dev/Access_API#Context_fetching

HOW TO SAVE YOUR TERMINAL OUTPUT TO A FILE
    script (type this into your terminal and it will start recording)

HOW TO EXTRACT FILES
    Type man tar for more information, but this command should do the trick:

    tar -xvzf community_images.tar.gz
    To explain a little further, tar collected all the files into one package, community_images.tar. The gzip program applied compression, hence the gz extension. So the command does a couple things:

    f: this must be the last flag of the command, and the tar file must be immediately after. It tells tar the name and path of the compressed file.
    z: tells tar to decompress the archive using gzip
    x: tar can collect files or extract them. x does the latter.
    v: makes tar talk a lot. Verbose output shows you all the files being extracted.

HOW TO CHANGE THE EXTENSION OF A FILE
    mv your_file.extension your_file.new.extension

HOW TO MOVE FILES TO ANOTHER FOLDER
    mv your_file.extension new/path/

STACK TRACE OF BEHAT ERROR WHEN THE PLD WEBSERVICE IS NOT CALLED CORRECTLY
    Error code: generalexceptionmessage
    * line 228 of /local/pld/classes/webservice/pld_search_courses.php: Error thrown
    * line 101 of /local/pld/classes/webservice/pld_search_courses.php: call to local_pld\webservice\pld_search_courses::search_courses()
    * line 228 of /lib/externallib.php: call to local_pld\webservice\pld_search_courses::local_pld_search_courses()
    * line 59 of /lib/ajax/service.php: call to external_api::call_external_function()


SET GOALS - BLACKBOARD
    https://onblackboard.sharepoint.com/sites/HR/PerformanceManagement/Pages/Goals-Management-for-Employees.aspx

#----------------GUYS ALLY LOGGER PR - Psr logger #19------------------------#

kow accept https://github.com/blackboard-open-source/moodle-filter_ally/pull/12 filter/ally

vendor/bin/phpunit --colors "local_geniusws_server_service_test" local/geniusws/tests/server/service_test.php

revert

commit c5d1a1108943df8cb0186cef975b1e273667edd8 (origin/update/INT-14160_dreary-magpie, update/INT-14160_dreary-magpie)
Author: Sebastian Gracia <sebastian.graciavalderrama@blackboard.com>
Date:   Thu Feb 21 12:28:50 2019 -0500

    INT-14160: Array context deleted

commit 1a624bed15d824774bbc8f7aedd24ae44fddeb35 (origin/update/INT-14160_acclaimed-cow, update/INT-14160_acclaimed-cow)
Author: Sebastian Gracia <sebastian.graciavalderrama@blackboard.com>
Date:   Fri Feb 15 15:49:04 2019 -0500

    INT-14160: Node module deleted

kow accept https://github.com/blackboard-open-source/moodle-tool_ally/pull/23 admin/tool/ally
#----------------------------------------------------------------------------#

HOW TO GRUNT FILES
    Desde '/Users/sebastiangracia/vagrant/www/moodle' ejecutar este comando:
        grunt uglify:amd --force

HOW TO DELETE MODIFIED FILES FROM git status (i.e. When you execute a grunt command from moodle and it creates 400+ min.js files)
    git reset --hard *DO THIS AFTER ADDING (git add path/to/file.myfile) THE FILES YOU WANT TO COMMIT*


STOP RECORDINGS ON MAC
    COMMAND + CONTROL + ESC

INT-14273 - SI 04090783
    SELECT c.*
    FROM {course_modules} cm
    JOIN {course} c O4N c.id = cm.course
    WHERE cm.id = ?
    [array (0 => 401,)]

HOW TO PRINT THE VALUE OF A VARIABLE
    var_dump($MyVariable);

INT-14215

    Scenario 1
        Set up two pages with manual activity completion. Created PLD rule on activity completion of first page to display alert and PLD on activity completion of second page to redirect to an assignment.

        Results testing in Snap: PLD history shows rule trigger upon manually marking page complete. Alert displayed only after reloading course. Redirect to assignment never happened, even after reload.
        Results testing in Boost: Same behavior as Snap.

    Scenario 2:
        Set up two pages with activity completion upon viewing page. Created PLD rule on activity completion of first page to display alert and PLD on activity completion of second page to redirect to an assignment.

        Results testing in Boost: Alert displayed immediately upon opening page. Redirect also occurred upon opening page preventing opportunity to read page, could be mitigated with a delay on action.
        Results testing in Snap: Clicking "Read more" button marks page complete and PLD history indicates rule triggered. However, alert only displayed upon reloading course. Redirect to assignment also only worked upon reloading the course.

    Scenario 3:
        Set up two assignments with manual completion. Created PLD rule on activity completion of first assignment to display alert and PLD on activity completion of second assignment to redirect to a quiz.

        Results testing in Snap: PLD history shows rules triggered upon manually marking assignments complete. Alert displayed only after reloading course. Redirect to assignment never happened, even after reload.
        Results testing in Boost: PLD history shows rules triggered upon manually marking assignments complete. However, alert only displayed upon reloading course. Redirect to assignment also only worked upon reloading the course.


        Courses / Year3 / Semester2 / Math103Y3S2 / Math 103: Intermediate Algebra

#-----------HACKATHON-----------#

Stories
1. AVISO DE CAMBIO DE COLOR INVALIDO Y LINK CON MAS INFORMACION, NO OBLIGARLO SOLO WARNING. (SOY UN ADMIN, CAMBIO EL COLOR DEL SITIO, GUARDO CAMBIOS Y ME SALE EL WARNING....)
2. PRUEBAS UNITARIAS.
3. AL CARGAR UNA IMAGEN, CARGARLA EN MEMORIA Y HACER EL HISTOGRAMA Y HACER LOS CALCULOS
    3.1 CONTRASTE CON LAS IMAGENES: HISTOGRAMA -> EL MAYOR/MENOR NUMERO SE COMPARA
        IDENTIFICAR LA 3RA PARTE/30% IZQ SUPERIOR Y COMPRAR EL CONTRASTE Y DECIR UN WARNING
4. DEBAJO DEL COLOR DECIR: ESTE COLOR NO CUMPLE CON LOS CONTRASTES REQUERIDOS.....
    EN SNAP->NAVIGATION COLOR
             COVER DISPLAY

RESEARCH
CHANGE RGB TO PALETTE FOR COLOR BLINDESS

SITE COLOR - BOTONES, TEXTO, LINKS, ICONOS (FG)
NAV BAR BK
NAV BAR FG
BUT NAV BAR BK
BUT NAV BAR FG
CATEGORY COLOR (FG) vs NAV BAR

PENSAR TODAS LAS POSIBLES COMBINACIONES DE LOS COMPONENTES:
1. SITE COLOR Vs. BLANCO (#FFFF)
2. NAV BAR BK Vs. NAV BAR FG
3. BUT NAV BAR BK Vs. BUT NAV BAR FG
5. SITE COLOR Vs. BLANCO (DEFAULT) / y otras mas..
6. CATEGORY COLOR Vs. POR DEFECTO SE COMPARA CON BLANCO SI LOS DE ABAJO NO ESTAN ACTIVADOS:
                        6.1 NAV BAR BK
                        6.2 BUT NAV BK

#RGB
#F00 (RED)
#EF0000 (OTRO ROJO)

INT-14291

vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/report/allylti/tests/behat/configure_lti_settings.feature
vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/report/allylti/tests/behat/view_report.feature

/vagrant/www/moodle/theme/snap/layout/faux_site_index.php:96:string '<div class="courses frontpage-course-list-all">
<div class="coursebox clearfix odd first" data-courseid="287" data-type="1"><div class="info"><h3 class="coursename">
<a class="" href="http://moodle.test/course/view.php?id=287">curso loco 127</a></h3><div class="moreinfo"></div></div>
<div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11486/course/overviewfiles/rawcoverimage.jpg" /></div></div></div>
<div class="coursebox clearfix even" data-courseid="285" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=285">curso loco 125</a></h3><div class="moreinfo"></div></div><div class="content">
<div class="courseimage"><img src="http://moodle.test/pluginfile.php/11484/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="283" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=283">curso loco 123</a></h3><div class="moreinfo"></div>
</div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11482/course/overviewfiles/rawcoverimage.png" /></div></div></div><div class="coursebox clearfix even" data-courseid="273" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=273">curso loco 113</a></h3><div class="moreinfo">
</div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11472/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="271" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=271">curso loco 111</a>
</h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11470/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="269" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=269">curso loco 109</a></h3><div class="moreinfo"></div></div><div class="content">
<div class="courseimage"><img src="http://moodle.test/pluginfile.php/11468/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="259" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=259">curso loco 99</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11458/course/overviewfiles/rawcoverimage.jpg" />
</div></div></div><div class="coursebox clearfix even" data-courseid="257" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=257">curso loco 97</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11456/course/overviewfiles/rawcoverimage.jpg" />
</div></div></div><div class="coursebox clearfix odd" data-courseid="255" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=255">curso loco 95</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11454/course/overviewfiles/rawcoverimage.png" /></div></div></div><div class="coursebox clearfix even" data-courseid="245" data-type="1"><div class="info"><h3 class="coursename">
<a class="" href="http://moodle.test/course/view.php?id=245">curso loco 85</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11444/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="243" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=243">curso loco 83</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage">
<img src="http://moodle.test/pluginfile.php/11442/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="241" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=241">curso loco 81</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage">
<img src="http://moodle.test/pluginfile.php/11440/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="231" data-type="1"
><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=231">curso loco 71</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11430/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="229" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=229">curso loco 69</a></h3><div class="moreinfo"></div></div><div class="content">
<div class="courseimage"><img src="http://moodle.test/pluginfile.php/11428/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="227" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=227">curso loco 67</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11426/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="217" data-type="1">
<div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=217">curso loco 57</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11416/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="215" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=215">curso loco 55</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage">
<img src="http://moodle.test/pluginfile.php/11414/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="213" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=213">curso loco 53</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11412/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="203" data-type="1"><div class="info">
<h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=203">curso loco 43</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11402/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="201" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=201">curso loco 41</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage">
<img src="http://moodle.test/pluginfile.php/11400/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="199" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=199">curso loco 39</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11398/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="189" data-type="1">
<div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=189">curso loco 29</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11388/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="187" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=187">curso loco 27</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage">
<img src="http://moodle.test/pluginfile.php/11386/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="185" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=185">curso loco 25</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11384/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix odd" data-courseid="175" data-type="1"><div class="info">
<h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=175">curso loco 15</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage"><img src="http://moodle.test/pluginfile.php/11374/course/overviewfiles/rawcoverimage.jpg" /></div></div></div><div class="coursebox clearfix even" data-courseid="173" data-type="1"><div class="info"><h3 class="coursename"><a class="" href="http://moodle.test/course/view.php?id=173">curso loco 13</a></h3><div class="moreinfo"></div></div><div class="content"><div class="courseimage">
    <img src="http://moodle.test/pluginfile.php/11372/course/overviewfiles/rawcoverimage.jpg" /></div></div></div>

INT-14312
    /admin/tool/log/store/legacy/classes/log/store.php
        class store...
            public function __construct...
            public function get_events_select...
            public function get_events_select_count...
            public function dispose...
            public function get_events_select_iterator
            public function get_log_event
            public function is_logging


    mod/customer/classes/certificate.php
    mod/certificate/locallib.php
    /admin/tool/log/store/legacy/classes/log/store_test.php
    report/stats/lib.php *CORE*
    block/progress/lib.php
    block/conncampus/block_conncampus.php

Hello, based on https://tracker.moodle.org/browse/MDL-45104 and the soon to be deprecated methods
mentioned in admin/tool/log/store/legacy/classes/log/store.php, none of our plugins uses legacy log store as a direct extension or implementation
of the class legacy log store that will be fully deprecated, based on this no switch was made on our plugins therefor no PR will be submitted.
The only findings about the usage of the legacy log store are validations of instances of the class in different components of the
 site (i.e instanceof expressions).


INT-14244
In local/pld/model/action.php

/** NEW METHOD
  * Validates if a user is suspended and exclude the user from the reciepent list
  *
  * @param array $recipients
  * @param event $event
  * @return array $reciepents
  */
 private function get_active_users($recipient, $courseid){
     global $DB;
     $sql = "SELECT userid FROM {user_enrolments} ue
         JOIN {enrol} en on en.id = ue.enrolid
         WHERE ue.status = 1
         AND en.courseid = " . $courseid;

     $suspended_users = $DB->get_records_sql($sql);

     foreach ($recipient as $llave => $user) {
         foreach ($suspended_users as $key => $object) {
             if (strcmp($user->id, $object->userid) == 0) {
                 unset($recipient[$llave]);
             }
         }
     }
     return $recipient;
 }

 In method
 private function resolve_recipients($recipients, $event){
        $resolved = array();

        foreach($recipients as $recipient) {
            foreach($this->resolve_recipient($recipient, $event) as $user){
                $resolved[] = $user;
            }
                foreach($this->resolve_recipient($recipient, $event) as $user){
                        $resolved[] = $user;
                }
        }

        $resolved=$this->get_active_users($resolved, $event->courseid); //THIS LINE CLEANS RECIEPENTS THAT ARE SUSPENDED
        return $resolved;
    }

INT-14329
  $CFG->messagingallusers
  \core_message\api::MESSAGE_PRIVACY_SITE
  php admin/tool/task/cli/schedule_task.php --execute="\mod_forum\task\cron_task"
  php lib/classes/task/messaging_cleanup_task.php --execute=""
  SELECT table_name AS `Table`, round(((data_length + index_length) / 1024 / 1024), 2) `Size in MB` FROM information_schema.TABLES WHERE table_schema = "moodleorg" AND table_name = "notifications";

INT-14513 (Community Bulk upgrade 5)
  In order to execute community bulk upgrades:
  1. create a new branch (kow checkout INT-XXYYZZ)
  2. Identify which pugins are due to be updated: i.e. "Update mod_turnitintooltwo with latest version https://moodle.org/plugins/mod_turnitintooltwo"
  3. create the command with the plugins due to be updated: i.e. "kow plugins-db mod_turnitintooltwo block_xxxx ..."
  4. Follow the appropiate:
    4.1 If you have to fix conflicts remember to commit those changes right after you fix them: i.e. "git commit -m "INT-XXYYZZ: your description..." "
    4.2 Type 'yes' in the terminal to continue...
  5. After all changes/conflicts/updates are done, type 'git status' and you should see how many commits you have just made: i.e. 3 plugins updated = 3 commits.
  CHANGES MADE IN MOODLE/PLAGIARISM/TURNITIN/DB/UPGRADE.PHP


  vendor/bin/behat --config /srv/moodledata/behat_moodledata/behatrun/behat/behat.yml /vagrant/www/moodle/plagiarism/turnitin/tests/behat/eula.feature

INT-14422
###############################################!! role_assignments !!#############################################################
  $DB->delete_records('role_assignments' //ONLY IN CORE
  $DB->insert_record('role_assignments'  // in local/ccuser_ie/classes/task/import_photo_assessment_task.php
                                                                           /import_student_orientation_task.php
  $DB->update_record('role_assignments'  // in auth/joomdle/auth.php
###############################################!! user_enrolments !!#############################################################
  $DB->insert_record('user_enrolments'    // in local/ccuser_ie/classes/task/import_photo_assessment_task.php
                                                                           /import_student_orientation_task.php
  $DB->update_record('user_enrolments'   // in local/ccuser_ie/classes/task/import_photo_assessment_task.php
                                                                           /import_student_orientation_task.php
  $DB->delete_records('user_enrolments', // ONY IN CORE

INT-14556
  https://github.com/middlebury/moodle-mod_adaptivequiz/issues/58

INT-14368

           * Get the list of users within a specific context.
           *
           * @param userlist $userlist The userlist containing the list of users who have data in this context/plugin combination.
           */
          public static function get_users_in_context(userlist $userlist)
          {
              $context = $userlist->get_context();

              if (!is_a($context, \context_course::class)) {
                  return;
              }

              $params = [
                  'courseid' => $context->instanceid,
              ];
              $params2 = [
                  'instanceid' => $context->instanceid,
              ];
              $params3 = [
                  'instanceid' => $context->instanceid,
              ];

              $sql = "SELECT coursexuser.userid as userid
              FROM {modxuserblock_collect_coursexuser} coursexuser
              WHERE coursexuser.cmid = :cmid";

              $userlist->add_from_sql('userid', $sql, $params);

              $sql2 = "SELECT modxuser.userid as userid
              FROM {block_collect_modxuser} modxuser
              WHERE modxuser.courseid = :cmid";

              $userlist->add_from_sql('userid', $sql2, $params2);

              $sql3 = "SELECT scormtrack.userid as userid
              FROM {block_collect_scormtrack} scormtrack
              WHERE scormtrack.courseid = :cmid";

              $userlist->add_from_sql('userid', $sql3, $params3);
          }

          /**
           * Delete multiple users within a single context.
           *
           * @param approved_userlist $userlist The approved context and user information to delete information for.
           */
          public static function delete_data_for_users(approved_userlist $userlist)
          {
              global $DB;

              $context = $userlist->get_context();
              if (!($context instanceof \context_course)) {
                  return;
              }

              list($userinsql, $userinparams) = $DB->get_in_or_equal($userlist->get_userids(), SQL_PARAMS_NAMED);
              $sql = "userid $userinsql AND courseid = :courseid";
              $params = array_merge($userinparams, ['courseid' => $context->instanceid]);

              $sql2 = "userid $userinsql AND courseid = :courseid";
              $params2 = array_merge($userinparams, ['cmid' => $context->instanceid]);

              $sql3 = "userid $userinsql AND courseid = :courseid";
              $params3 = array_merge($userinparams, ['scormid' => $context->instanceid]);


              $DB->delete_records_select('block_collect_modxuser', $sql, $params);
              $DB->delete_records_select('block_collect_coursexuser', $sql2, $params2);
              $DB->delete_records_select('block_collect_scormtrack', $sql3, $params3);
          }
      }

      $userlist->add_from_sql('userid', $sql2, $params2);

      $sql3 = "SELECT scormtrack.userid as userid
              FROM {block_collect_scormtrack} scormtrack
              WHERE scormtrack.courseid = :cmid";

      $userlist->add_from_sql('userid', $sql3, $params3);
  }

  /**
   * Delete multiple users within a single context.
   *
   * @param approved_userlist $userlist The approved context and user information to delete information for.
   */
  public static function delete_data_for_users(approved_userlist $userlist) {
      global $DB;

      $context = $userlist->get_context();
      if (!($context instanceof \context_course)){
          return;
      }

      list($userinsql, $userinparams) = $DB->get_in_or_equal($userlist->get_userids(), SQL_PARAMS_NAMED);
      $sql = "userid $userinsql AND courseid = :courseid";
      $params = array_merge($userinparams, ['courseid' => $context->instanceid]);

      $sql2 = "userid $userinsql AND courseid = :courseid";
      $params2 = array_merge($userinparams, ['cmid' => $context->instanceid]);

      $sql3 = "userid $userinsql AND courseid = :courseid";
      $params3 = array_merge($userinparams, ['scormid' => $context->instanceid]);


      $DB->delete_records_select('block_collect_modxuser', $sql, $params);
      $DB->delete_records_select('block_collect_coursexuser',$sql2, $params2);
      $DB->delete_records_select('block_collect_scormtrack',$sql3, $params3);
  }
}

Argument 1 passed to block_collect\privacy\provider::delete_data_for_users() must be an instance of block_collect\privacy\approved_userlist, instance of core_privacy\local\request\approved_userlist given,
called in /vagrant/www/moodle/blocks/collect/tests/privacy_provider_test.php on line 363


13/40/86/68/00


vendor/bin/phpunit /blocks/intelligent_learning/tests/privacy_provider_test.php
vendor/bin/phpunit /blocks/intelligent_learning/tests/privacy_provider_test.php
